/*!
 * @preserve
 *
 * Readmore.js jQuery plugin
 * Author: @jed_foster
 * Project home: http://jedfoster.github.io/Readmore.js
 * Licensed under the MIT license
 *
 * Debounce function from http://davidwalsh.name/javascript-debounce-function
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){"use strict";var t="readmore",i={speed:100,collapsedHeight:200,heightMargin:16,moreLink:'<a href="#">Read More</a>',lessLink:'<a href="#">Close</a>',embedCSS:!0,blockCSS:"display: block; width: 100%;",startOpen:!1,blockProcessed:function(){},beforeToggle:function(){},afterToggle:function(){}},o={},n=0;function a(e){var t=e.clone().css({height:"auto",width:e.innerWidth(),maxHeight:"none",overflow:"hidden"}).insertAfter(e),i=t.outerHeight(),o=parseInt(t.css({maxHeight:""}).css("max-height").replace(/[^-\d\.]/g,""),10),n=e.data("defaultHeight");t.remove();var a=o||e.data("collapsedHeight")||n;e.data({expandedHeight:i,maxHeight:o,collapsedHeight:a}).css({maxHeight:"none"})}var s,r,d,h,l=(s=function(){e("[data-readmore]").each(function(){var t=e(this),i="true"===t.attr("aria-expanded");a(t),t.css({height:t.data(i?"expandedHeight":"collapsedHeight")})})},r=100,function(){var e=this,t=arguments,i=d&&!h;clearTimeout(h),h=setTimeout(function(){h=null,d||s.apply(e,t)},r),i&&s.apply(e,t)});function c(n,a){this.element=n,this.options=e.extend({},i,a),function(e){if(!o[e.selector]){var t=" ";e.embedCSS&&""!==e.blockCSS&&(t+=e.selector+" + [data-readmore-toggle], "+e.selector+"[data-readmore]{"+e.blockCSS+"}"),t+=e.selector+"[data-readmore]{transition: height "+e.speed+"ms;overflow: hidden;}",i=document,n=t,(a=i.createElement("style")).type="text/css",a.styleSheet?a.styleSheet.cssText=n:a.appendChild(i.createTextNode(n)),i.getElementsByTagName("head")[0].appendChild(a),o[e.selector]=!0}var i,n,a}(this.options),this._defaults=i,this._name=t,this.init(),window.addEventListener?(window.addEventListener("load",l),window.addEventListener("resize",l)):(window.attachEvent("load",l),window.attachEvent("resize",l))}c.prototype={init:function(){var t=e(this.element);t.data({defaultHeight:this.options.collapsedHeight,heightMargin:this.options.heightMargin}),a(t);var i=t.data("collapsedHeight"),o=t.data("heightMargin");if(t.outerHeight(!0)<=i+o)return this.options.blockProcessed&&"function"==typeof this.options.blockProcessed&&this.options.blockProcessed(t,!1),!0;var s,r=t.attr("id")||function(e){var t=++n;return String(null==e?"rmjs-":e)+t}(),d=this.options.startOpen?this.options.lessLink:this.options.moreLink;t.attr({"data-readmore":"","aria-expanded":this.options.startOpen,id:r}),t.after(e(d).on("click",(s=this,function(e){s.toggle(this,t[0],e)})).attr({"data-readmore-toggle":r,"aria-controls":r})),this.options.startOpen||t.css({height:i}),this.options.blockProcessed&&"function"==typeof this.options.blockProcessed&&this.options.blockProcessed(t,!0)},toggle:function(t,i,o){o&&o.preventDefault(),t||(t=e('[aria-controls="'+this.element.id+'"]')[0]),i||(i=this.element);var n,a=e(i),s="",r="",d=!1,h=a.data("collapsedHeight");a.height()<=h?(s=a.data("expandedHeight")+"px",r="lessLink",d=!0):(s=h,r="moreLink"),this.options.beforeToggle&&"function"==typeof this.options.beforeToggle&&this.options.beforeToggle(t,a,!d),a.css({height:s}),a.on("transitionend",(n=this,function(){n.options.afterToggle&&"function"==typeof n.options.afterToggle&&n.options.afterToggle(t,a,d),e(this).attr({"aria-expanded":d}).off("transitionend")})),e(t).replaceWith(e(this.options[r]).on("click",function(e){return function(t){e.toggle(this,i,t)}}(this)).attr({"data-readmore-toggle":a.attr("id"),"aria-controls":a.attr("id")}))},destroy:function(){e(this.element).each(function(){var t=e(this);t.attr({"data-readmore":null,"aria-expanded":null}).css({maxHeight:"",height:""}).next("[data-readmore-toggle]").remove(),t.removeData()})}},e.fn.readmore=function(i){var o=arguments,n=this.selector||"";return"object"==typeof(i=i||{})?this.each(function(){if(e.data(this,"plugin_"+t)){var o=e.data(this,"plugin_"+t);o.destroy.apply(o)}i.selector=n,e.data(this,"plugin_"+t,new c(this,i))}):"string"==typeof i&&"_"!==i[0]&&"init"!==i?this.each(function(){var n=e.data(this,"plugin_"+t);n instanceof c&&"function"==typeof n[i]&&n[i].apply(n,Array.prototype.slice.call(o,1))}):void 0}});